<include file="layout/iframe@header" />

<!-- Site CSS -->
<link rel="stylesheet" href="__ABS__/assets/admui/themes/base/css/site.css">
<!--<link rel="stylesheet" href="__ABS__/assets/admui/vendor/switchery/switchery.css">-->
<!--<script src="__ABS__/assets/admui/vendor/switchery/switchery.min.js"></script>-->
<style>
    body {
        padding-top: 0;
    }
    .table thead th {
        text-align: left;
    }
</style>
<body class="page-aside-fixed page-aside-left" data-theme="base">

<div class="page animation-fade">
    <div class="page-aside">
        <div class="page-aside-switch">
            <i class="icon wb-chevron-left" aria-hidden="true"></i>
            <i class="icon wb-chevron-right" aria-hidden="true"></i>
        </div>

        <div class="page-aside-inner page-aside-scroll" data-plugin="mCustomScrollbar">
            <div data-role="container">
                <div data-role="content">
                    <section class="page-aside-section">
                        <div class="list-group">
                            <a class="list-group-item active" href="{:url('setting/login')}">
                                登录方式
                            </a>
                            <a class="list-group-item" href="{:url('setting/pay')}">
                                支付渠道
                            </a>
                            <a class="list-group-item" href="{:url('setting/sms')}">
                                短信配置
                            </a>
                            <a class="list-group-item" href="{:url('setting/position')}">
                                地图定位
                            </a>
                            <a class="list-group-item" href="{:url('setting/trtc')}">
                                腾讯云
                            </a>
                            <!--<a class="list-group-item" href="{:url('setting/aliyunOss')}">-->
                                <!--阿里云-->
                            <!--</a>-->
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
    <div class="page-main">
        <div class="page-header">
            <h3 class="page-title">选择APP的登录方式</h3>
        </div>
        <div class="page-content col-xxl-8">
            <div class="panel">
                <form class="form-horizontal panel-body" action="{:url('setting/loginPost')}" method="post" autocomplete="off" novalidate="novalidate">
                    <table class="table table-hover" data-selectable="selectable" data-row-selectable="true">
                        <thead>
                        <tr>
                            <th class="h-50" width="40%">登录方式</th>
                            <th class="h-50">配置</th>
                            <!--<th class="h-50">开启状态</th>-->
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>手机登录</td>
                            <td>
                                <button type="button" class="btn btn-icon btn-default btn-outline btn-sm">
                                    无需配置
                                </button>
                            </td>
                            <!--<td>-->
                                <!--<div class="float-left mr-20">-->
                                    <!--<input type="checkbox" id="id-phone" data-plugin="switchery" data-size="small" data-color="#62a8ea" checked disabled>-->
                                    <!--<label for="id-phone">默认必须开启</label>-->
                                <!--</div>-->
                            <!--</td>-->
                        </tr>
                        <tr>
                            <td>QQ登录</td>
                            <td>
                                <button type="button" class="btn btn-icon btn-default btn-outline btn-sm" onclick="setTypeOnclick(this)" data-modal="modal-qq">
                                    <i class="icon wb-wrench" aria-hidden="true"></i>
                                </button>
                            </td>
                            <!--<td>-->
                                <!--<div class="float-left mr-20">-->
                                    <!--<input type="checkbox" id="id-qq" name="type[qq]" value="qq"-->
                                           <!--data-plugin="switchery" data-size="small" data-color="#62a8ea" {$type.qq?='checked'}>-->
                                <!--</div>-->
                            <!--</td>-->
                        </tr>
                        <tr>
                            <td>微信登录</td>
                            <td>
                                <button type="button" class="btn btn-icon btn-default btn-outline btn-sm" onclick="setTypeOnclick(this)" data-modal="modal-weixin">
                                    <i class="icon wb-wrench" aria-hidden="true"></i>
                                </button>
                            </td>
                            <!--<td>-->
                                <!--<div class="float-left mr-20">-->
                                    <!--<input type="checkbox" id="id-weixin" name="type[weixin]" value="weixin"-->
                                           <!--data-plugin="switchery" data-size="small" data-color="#62a8ea" {$type.weixin?='checked'}>-->
                                <!--</div>-->
                            <!--</td>-->
                        </tr>
                        </tbody>
                    </table>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">提交</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!--qq登录配置-->
<div class="modal" id="modal-qq" aria-hidden="true" aria-labelledby="form_qq" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-center">
        <form class="modal-content" method="post" action="{:url('setting/loginType',['type'=>'qq'])}">
            <div class="modal-header">
                <button type="button" class="close" aria-hidden="true" data-dismiss="modal">×</button>
                <h4 class="modal-title">QQ登录配置</h4>
            </div>
            <div class="modal-body">
                <div class="form form-horizontal mt-20">
                    <div class="form-group row">
                        <label class="col-2 col-form-label">app_id</label>
                        <div class="col-9">
                            <input type="text" class="form-control" name="login_qq[app_id]" value="{$login_qq.app_id|default=''}" placeholder="请填写app_id">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label">app_secret</label>
                        <div class="col-9">
                            <input type="text" class="form-control" name="login_qq[app_secret]" value="{$login_qq.app_secret|default=''}" placeholder="请填写app_secret">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="submit">保存</button>
                <a class="btn btn-default" data-dismiss="modal">取消</a>
            </div>
        </form>
    </div>
</div>

<!--微信登录配置-->
<div class="modal" id="modal-weixin" aria-hidden="true" aria-labelledby="form_weixin" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-center">
        <form class="modal-content" method="post" action="{:url('setting/loginType',['type'=>'weixin'])}">
            <div class="modal-header">
                <button type="button" class="close" aria-hidden="true" data-dismiss="modal">×</button>
                <h4 class="modal-title">微信登录配置</h4>
            </div>
            <div class="modal-body">
                <div class="form form-horizontal mt-20">
                    <div class="form-group row">
                        <label class="col-2 col-form-label">app_id</label>
                        <div class="col-9">
                            <input type="text" class="form-control" name="login_weixin[app_id]" value="{$login_weixin.app_id|default=''}" placeholder="请填写app_id">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-2 col-form-label">app_secret</label>
                        <div class="col-9">
                            <input type="text" class="form-control" name="login_weixin[app_secret]" value="{$login_weixin.app_secret|default=''}" placeholder="请填写app_secret">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer text-center">
                <button class="btn btn-primary" type="submit">保存</button>
                <a class="btn btn-default" data-dismiss="modal">取消</a>
            </div>
        </form>
    </div>
</div>

<script>
    function setTypeOnclick(obj) {
        var modal = obj.getAttribute('data-modal');
        $('#'+modal).modal('show');
    }
</script>
</body>
</html>